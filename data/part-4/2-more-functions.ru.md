---
path: /ru/part-4/2-more-functions
title: Ещё о функциях
hidden: false
---

<text-box variant='learningObjectives' name="Цели обучения">

После этого раздела:

- вы будете лучше понимать параметры и аргументы функций
- вы узнаете, как возвращать значения из функций и использовать их в коде
- вы сможете добавлять подсказки типов (type hints) для параметров и возвращаемых значений

</text-box>

Быстро освежим в памяти функции в Python. Функции определяются ключевым словом `def`:

```python
def message():
    print("This message was brought to you by a function")
```

Вызвать эту функцию в коде программы можно так:

```python
message()
```

Тогда программа выведет:

<sample-output>

This message was brought to you by a function

</sample-output>

## Параметры и аргументы функции {#the-parameters-and-arguments-of-a-function}

Функция может принимать один или несколько аргументов. Когда функция вызывается, значения аргументов присваиваются переменным, которые указаны в определении функции. Эти переменные называются параметрами; они перечисляются в круглых скобках после имени функции.

В следующем примере у функции `greet` определён один параметр, а у функции `sum` — два.

```python
def greet(name):
    print("Hello there,", name)

def sum(a, b):
    print("The sum of the arguments is", a + b)
```

```python
greet("Emily")
sum(2, 3)
```

<sample-output>

Hello there, Emily
The sum of the arguments is 5

</sample-output>

<text-box variant='hint' name='Формальный и фактический: параметр и аргумент'>

Терминология, связанная с передачей данных в функции, иногда кажется запутанной. Ситуацию усложняет то, что разные источники называют то, что мы здесь называем параметрами и аргументами, по‑разному: _формальные_ и _фактические параметры_ или _формальные_ и _фактические аргументы_. В [документации Python](https://docs.python.org/3/glossary.html#term-argument) закреплены именно термины _argument_ и _parameter_, поэтому мы будем использовать их же.

Что на самом деле происходит при выполнении вызова `greet("Emily")`?

В определении `greet(name)` параметр `name` ведёт себя как обычная переменная. Мы можем использовать его внутри функции так же, как и переменные в основной части программы, с которыми вы уже много раз работали.

А в вызове `greet("Emily")` аргумент `"Emily"` — это просто строка, такая же, как и любые другие строки, которые встречались раньше. Например, её можно присвоить переменной.

Итак, при выполнении вызова значение аргумента `"Emily"` присваивается параметру `name`. На время _этого конкретного выполнения_ функции получается `name = "Emily"`. Если вызвать функцию с другим аргументом, то и значение `name` будет другим.

Эта терминология может показаться излишней, но информатика стремится быть максимально точной дисциплиной. Чётко определённые термины помогают избегать двусмысленностей.

</text-box>

## Сообщения об ошибках при запуске тестов {#error-messages-when-running-tests}

Большинство упражнений в этом курсе проверяются автоматическими тестами. Если программа не соответствует условию, тесты покажут сообщение об ошибке — оно может быть полезным, а может и нет. Обычно всё же стоит внимательно прочитать сообщение: часто оно помогает понять, что именно пошло не так.

Иногда сообщение почти ничего не проясняет. В следующем упражнении вы можете столкнуться, например, с таким сообщением:

<img src="4_2_1.png">

Сообщение лишь говорит, что функцию `line` должно быть возможно вызвать с указанными аргументами:
```python
line(5, "")
```

Причина становится понятнее, если попробовать выполнить сам вызов, который упомянут в ошибке. Для этого скопируйте его в программу и нажмите на треугольник запуска:

<img src="4_2_2.png">

Последние строки вывода (они выделены на картинке выше) показывают, что ошибка возникает на 4‑й строке кода: _IndexError: string index out of range_. В [предыдущей части](/ru/part-3/2-working-with-strings) был похожий пример: мы пытались обратиться по индексу, который выходит за границы строки. Здесь ошибка появляется потому, что мы пытаемся взять первый символ пустой строки — то есть строки длины 0.

<programming-exercise name='Линия' anchor="Line" tmcname='part04-02_line'>

Напишите функцию `line`, которая принимает два аргумента: целое число и строку. Функция печатает строку указанной длины (длина задаётся первым аргументом). Символ, из которого строится линия, — это первый символ второй строки‑аргумента. Если второй аргумент — пустая строка, линия должна состоять из звёздочек.

Пример ожидаемого поведения:

```python
line(7, "%")
line(10, "LOL")
line(3, "")
```

<sample-output>

<pre>
%%%%%%%
LLLLLLLLLL
***
</pre>

</sample-output>

</programming-exercise>

## Вызов функций внутри других функций {#function-calls-within-function-calls}

Функцию можно вызывать изнутри другой функции. Мы уже делали это много раз, когда вызывали `print` внутри своих функций в предыдущей части. С пользовательскими функциями всё то же самое. В следующем примере функция `greet_many_times` вызывает `greet` столько раз, сколько указано в аргументе `times`:

```python
def greet(name):
    print("Hello there,", name)

def greet_many_times(name, times):
    while times > 0:
        greet(name)
        times -= 1

greet_many_times("Emily", 3)
```

<sample-output>

Hello there, Emily
Hello there, Emily
Hello there, Emily

</sample-output>

<programming-exercise name='Прямоугольник из решёток' anchor="A box of hashes" tmcname='part04-03_box_of_hashes'>

Напишите функцию `box_of_hashes`, которая печатает прямоугольник из символов `#`. Функция принимает один аргумент — высоту прямоугольника. Ширина прямоугольника должна быть 10 символов.

Для печати используйте функцию `line` из предыдущего упражнения: именно она должна выводить строки. Скопируйте решение упражнения `line` выше кода текущего упражнения. Пожалуйста, не изменяйте вашу функцию `line`.

Несколько примеров того, как должна работать функция:

```python
box_of_hashes(5)
print()
box_of_hashes(2)
```

<sample-output>

<pre>
##########
##########
##########
##########
##########

##########
##########
</pre>

</sample-output>

</programming-exercise>

<programming-exercise name='Квадрат из решёток' anchor="A square of hashes" tmcname='part04-04_square_of_hashes'>

Напишите функцию `square_of_hashes`, которая рисует квадрат из символов `#`. Функция принимает один аргумент — длину стороны квадрата.

Для печати используйте функцию `line` из предыдущего упражнения: именно она должна выводить строки. Скопируйте решение упражнения `line` выше кода текущего упражнения. Пожалуйста, не изменяйте вашу функцию `line`.

Примеры:

```python
square_of_hashes(5)
print()
square_of_hashes(3)
```

<sample-output>

<pre>
#####
#####
#####
#####
#####

###
###
###
</pre>

</sample-output>

</programming-exercise>

<programming-exercise name='Квадрат' anchor="A square" tmcname='part04-05_square'>

Напишите функцию `square`, которая печатает квадрат из символов и принимает два аргумента. Первый параметр задаёт длину стороны квадрата. Второй параметр задаёт символ, из которого рисуется квадрат.

Для печати используйте функцию `line` из предыдущего упражнения: именно она должна выводить строки. Скопируйте решение упражнения `line` выше кода текущего упражнения. Пожалуйста, не изменяйте вашу функцию `line`.

Примеры:

```python
square(5, "*")
print()
square(3, "o")
```

<sample-output>

<pre>
*****
*****
*****
*****
*****

ooo
ooo
ooo
</pre>

</sample-output>

</programming-exercise>

<programming-exercise name='Треугольник' anchor="A triangle" tmcname='part04-06_triangle'>

Напишите функцию `triangle`, которая рисует треугольник из решёток и принимает один аргумент. Треугольник должен быть такой же высоты и ширины, как значение аргумента.

Для печати используйте функцию `line` из предыдущего упражнения: именно она должна выводить строки. Скопируйте решение упражнения `line` выше кода текущего упражнения. Пожалуйста, не изменяйте вашу функцию `line`.

Примеры:

```python
triangle(6)
print()
triangle(3)
```

<sample-output>

<pre>
#
##
###
####
#####
######

#
##
###
</pre>

</sample-output>

</programming-exercise>

<programming-exercise name='Фигура' anchor="A shape" tmcname='part04-07_shape'>

Напишите функцию `shape`, которая принимает четыре аргумента. Первые два параметра задают треугольник (как в упражнении выше) и символ, из которого он рисуется. Первый параметр также определяет ширину прямоугольника, третий параметр задаёт его высоту. Четвёртый параметр задаёт символ‑заполнитель прямоугольника. Функция должна сначала напечатать треугольник, а затем — прямоугольник под ним.

Для печати используйте функцию `line` из предыдущего упражнения: именно она должна выводить строки. Скопируйте решение упражнения `line` выше кода текущего упражнения. Пожалуйста, не изменяйте вашу функцию `line`.

Примеры:

```python
shape(5, "X", 3, "*")
print()
shape(2, "o", 4, "+")
print()
shape(3, ".", 0, ",")
```

<sample-output>

<pre>
X
XX
XXX
XXXX
XXXXX
*****
*****
*****

o
oo
++
++
++
++

.
..
...
</pre>

</sample-output>

**Подсказка**

Не пытайтесь решить это упражнение «целиком одним махом». Хороший первый шаг — убедиться, что вы надёжно печатаете треугольник. Затем можно добавить прямоугольник.

Это один из важнейших навыков программиста: **сосредотачиваться на небольших, конкретных частях задачи**. Решайте и проверяйте промежуточные решения, а затем собирайте из них полный ответ.

</programming-exercise>

<programming-exercise name='Ёлочка' anchor="A spruce" tmcname='part04-08_spruce'>

Напишите функцию `spruce`, которая принимает один аргумент. Функция должна напечатать текст `a spruce!`, а затем ель, размер которой задаётся аргументом.

Вызов `spruce(3)` должен печатать:

<sample-output>

<pre>
a spruce!
  *
 ***
*****
  *
</pre>

</sample-output>

Вызов `spruce(5)` должен печатать:

<sample-output>

<pre>
a spruce!
    *
   ***
  *****
 *******
*********
    *
</pre>

</sample-output>

**Важно: слева от ели должно быть ровно нужное количество пробелов.** Если форма выглядит правильно, но левый край дерева не совпадает с левым краем области вывода в терминале, тесты не примут решение.

</programming-exercise>

## Возвращаемое значение функции {#the-return-value-of-a-function}

Функции могут не только что‑то печатать, но и возвращать значения. Например, встроенная функция Python `input` _возвращает_ строку, которую вводит пользователь. Возвращаемое значение можно сохранить в переменной:

```python
word = input("Please type in a word: ")
```

Если вам нужно получить от пользователя целое число, введённую строку нужно преобразовать в число. Для этого мы использовали функцию `int`, и она тоже возвращает значение:

```python
number = int(input("Please type in an integer: "))
```

Функция `int` принимает строку, возвращённую `input`, в качестве аргумента и возвращает значение типа `int`, если из строки можно разобрать целое число.

## Инструкция `return` {#the-return-statement}

Функции, которые вы определяете сами, тоже могут возвращать значения. Для этого используется инструкция `return`. Например, следующая функция `my_sum` возвращает сумму своих параметров:

```python
def my_sum(a, b):
    return a + b

result = my_sum(2, 3)

print("Sum:", result)
```

<sample-output>

Sum: 5

</sample-output>

Вот ещё пример возвращаемого значения. Эта функция спрашивает имя пользователя и возвращает введённую строку:

```python
def ask_for_name():
    name = input("What is your name? ")
    return name

name = ask_for_name()
print("Hello there,", name)
```

<sample-output>

What is your name? **Anna**
Hello there, Anna

</sample-output>

Инструкция `return` немедленно завершает выполнение функции. Следующий пример — удобный способ написать функцию сравнения:

```python
def smallest(a,b):
    if a < b:
        return a
    return b

print(smallest(3, 7))
print(smallest(5, 2))
```

Идея в том, что если `a` меньше `b`, функция возвращает `a` и сразу завершает работу. Если нет — выполнение продолжается на следующей строке, и возвращается `b`. За один вызов функция не может выполнить две разные инструкции `return`.

<sample-output>

3
2

</sample-output>

Инструкцию `return` можно использовать даже тогда, когда функция не возвращает значение. В этом случае её задача — просто завершить выполнение функции:

```python
def greet(name):
    if name == "":
        print("???")
        return
    print("Hello there,", name)

greet("Emily")
greet("")
greet("Mark")
```

Если аргумент (он попадает в переменную `name`) — пустая строка, функция печатает `???` и завершает работу.

<sample-output>

Hello there, Emily
???
Hello there, Mark

</sample-output>

## Использование возвращаемых значений {#using-return-values-from-functions}

Мы уже знаем, что возвращаемые значения можно сохранять в переменных:

```python
def my_sum(a, b):
    return a + b

result = my_sum(4, 6)
print("The sum is", result)
```

<sample-output>

The sum is 10

</sample-output>

Возвращаемое значение — это такое же значение, как и любое другое. Необязательно сохранять его в переменной, чтобы передать в `print`:

```python
print("The sum is", my_sum(4, 6))
```

Возвращаемое значение одной функции может быть аргументом другой функции:

```python
def my_sum(a, b):
    return a+b

def difference(a, b):
    return a-b

result = difference(my_sum(5, 2), my_sum(2, 3))
print("The result is", result)
```

<sample-output>

The result is 2

</sample-output>

В этом случае сначала выполняются внутренние вызовы `my_sum(5, 2)` и `my_sum(2, 3)`. Возвращаемые ими значения (7 и 5) используются как аргументы внешнего вызова.

Затем внешний вызов `difference(7, 5)` возвращает значение 2, оно сохраняется в переменной `result` и выводится на экран.

Итого: значения, которые возвращают функции, работают в Python как обычные значения. Их можно печатать, сохранять в переменных, использовать в выражениях и передавать как аргументы другим функциям.

## Разница между `return` и `print` {#the-difference-between-return-and-print}

Иногда разница между тем, что функция _возвращает_ значение, и тем, что внутри функции выполняется _печать_, может сбивать с толку. Рассмотрим два способа реализовать функцию, которая определяет, какое из двух значений больше:

```python
def max1(a, b):
    if a > b:
        return a
    else:
        return b

def max2(a, b):
    if a > b:
        print(a)
    else:
        print(b)

result = max1(3, 5)
print(result)

max2(7, 2)
```

<sample-output>

5
7

</sample-output>

Обе версии вроде бы работают: максимальные значения печатаются правильно. Но между ними есть принципиальная разница. Первая функция, `max1`, сама ничего не печатает — она _возвращает_ большее значение. Если выполнить строку

```python
max1(3, 5)
```

кажется, что «ничего не произошло». Возвращаемое значение нужно как‑то _использовать_ в коде, который вызвал функцию. Например, сохранить в переменной и вывести:

```python
result = max1(3, 5)
print(result)
```

Вторая версия, `max2`, использует `print` _внутри функции_ и печатает большее значение сама. Чтобы увидеть результат, достаточно просто вызвать функцию

```python
max2(7, 5)
```

и большее значение будет выведено. Минус в том, что вычисленное значение не становится доступным для дальнейшего использования в программе, которая вызвала функцию. Поэтому функции, которые возвращают значения, часто оказываются более удобным вариантом.

<programming-exercise name='Наибольшее число' anchor="The greatest number" tmcname='part04-09_greatest_number'>

Напишите функцию `greatest_number`, которая принимает три аргумента и возвращает наибольшее из трёх значений.

Пример использования функции:

```python
print(greatest_number(3, 4, 1)) # 4
print(greatest_number(99, -4, 7)) # 99
print(greatest_number(0, 0, 0)) # 0
```

</programming-exercise>

<programming-exercise name='Одинаковые символы' anchor="Same characters" tmcname='part04-10_same_characters'>

Напишите функцию `same_chars`, которая принимает строку и два целых числа. Эти числа — индексы внутри строки. Функция должна вернуть `True`, если символы по указанным индексам одинаковые. В противном случае — и особенно если хотя бы один индекс выходит за пределы строки — функция должна вернуть `False`.

Примеры использования:

```python
# одинаковые символы m и m
print(same_chars("programmer", 6, 7)) # True

# разные символы p и r
print(same_chars("programmer", 0, 4)) # False

# второй индекс выходит за пределы строки
print(same_chars("programmer", 0, 12)) # False
```

</programming-exercise>

<programming-exercise name='Первое, второе и последнее слова' anchor="First, second and last words" tmcname='part04-11_first_second_last'>

Напишите три функции: `first_word`, `second_word` и `last_word`. Каждая функция принимает строку.

Как следует из названий, функции должны возвращать первое, второе или последнее слово из предложения, которое передано аргументом.

В каждом случае можно считать, что строка содержит как минимум два слова, все слова разделены ровно одним пробелом, а в начале и в конце строки пробелов нет.

```python
sentence = "it was a dark and stormy python"

print(first_word(sentence)) # it
print(second_word(sentence)) # was
print(last_word(sentence)) # python
```

<sample-output>

it
was
python

</sample-output>

```python
sentence = "it was"

print(second_word(sentence)) # was
print(last_word(sentence)) # was
```

</programming-exercise>

## Типы аргументов {#the-type-of-the-argument}

Кратко напомним типы данных, которые встречались до сих пор:

Тип           | Тип данных Python | Пример
:-------------|:----------------:|------
целое число       | `int`            | `23`
вещественное число | `float`  | `-0.45`
строка        | `str`            | `"Peter Python"`
логическое значение | `bool`           | `True`

При вызове функции она корректно работает только тогда, когда аргументы имеют ожидаемые типы. Рассмотрим пример:

```python
def print_many_times(message, times):
    while times > 0:
        print(message)
        times -= 1
```

Функция работает как ожидается, если вызвать её так:

```python
print_many_times("Hello there", 5)
```

<sample-output>

Hello there
Hello there
Hello there
Hello there
Hello there

</sample-output>

Но если передать аргумент неправильного типа, она не заработает:

```python
print_many_times("Hello there", "Emily")
```

<sample-output>

TypeError: '>' not supported between instances of 'str' and 'int'

</sample-output>

Проблема в том, что на второй строке определения функции второй параметр `times` сравнивается с целым числом `0`. А в качестве второго аргумента передали `"Emily"` — это строка, а не число. Строки и числа нельзя сравнивать таким образом, поэтому возникает ошибка.

Чтобы избегать подобных проблем, можно добавлять в определения функций _подсказки типов_ (type hints). Подсказка типа указывает, какой тип аргумента ожидается:

```python
def print_many_times(message : str, times : int):
    while times > 0:
        print(message)
        times -= 1
```

Так мы сообщаем, что в `message` ожидается строка, а в `times` — целое число.

Аналогично можно указать тип возвращаемого значения:

```python
def ask_for_name() -> str:
    name = input("Mikä on nimesi? ")
    return name
 ```

Это сообщает пользователю функции, что она должна возвращать строку.

**Важно:** подсказки типов — это буквально лишь «подсказки». Они не гарантируют тип и не защищают от ошибок типов. Если функция получит аргумент или вернёт значение другого типа, Python всё равно попытается выполнить код — но он может работать неверно.

<!---
Тест для повторения материала этого раздела:

<quiz id="fb289a3b-288a-5a9f-b3d2-07ceae5866ea"></quiz>
-->
