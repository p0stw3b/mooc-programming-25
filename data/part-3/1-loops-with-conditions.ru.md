---
path: /ru/part-3/1-loops-with-conditions
title: Циклы с условиями
hidden: false
---

<text-box variant='learningObjectives' name="Цели обучения">

После этого раздела:

- вы научитесь создавать цикл `while` с условием
- вы будете понимать роль инициализации, формулировки условия и обновления переменных в цикле
- вы сможете создавать циклы с разными типами условий

</text-box>

<!--тот же текст есть в разделах 3-1, 5-1 и 6-1; если меняете здесь — проверьте и там-->
<text-box variant='hint' name="Об упражнениях на этом курсе">

Чтобы стать уверенным программистом, нужно много практиковаться — иногда даже довольно «механически». Также важно развивать навыки решения задач и интуицию. Поэтому в этом курсе много упражнений разных типов. Некоторые из них предлагают просто применить то, что вы только что изучили, а некоторые намеренно сделаны более сложными и открытыми.

Некоторые упражнения поначалу могут показаться слишком трудными — это нормально и не повод переживать. Ни одно упражнение не является строго обязательным, и на самом деле _для прохождения курса достаточно набрать лишь 25% баллов в каждой части_. Подробнее — на [странице об оценивании](/ru/grading-and-exams).

**Упражнения не расположены в порядке сложности.** Обычно в каждом разделе вводятся новые концепции, а затем они закрепляются упражнениями — как простыми, так и более сложными. **Если вам попалось упражнение, которое кажется слишком трудным, переходите к следующему.** К сложным упражнениям можно вернуться позже, если останется время.

И когда (неизбежно) станет трудно, небольшое утешение: задача, которая кажется невозможной на этой неделе, через четыре недели, скорее всего, покажется довольно простой.

</text-box>

В предыдущем разделе мы использовали цикл `while True`, чтобы повторять фрагменты кода. В такой конструкции условие цикла — `True`, то есть оно истинно всегда. Поэтому, чтобы не получить бесконечный цикл, нам приходилось явно выходить из него с помощью `break`. Например:

```python
# Выводить числа, пока переменная a не станет равной 5
a = 1
while True:
    print(a)
    a += 1
    if a == 5:
        break
```

<sample-output>

1
2
3
4

</sample-output>

Конечно, условие не обязательно должно быть `True`: в качестве условия можно использовать любое булево выражение. Общая структура цикла `while` такая:

```python
while <condition>:
    <block>
```

Идея в том, что выполнение «ходит по кругу»: проверяет условие и, если оно истинно, выполняет код внутри блока снова и снова. Если в какой-то момент условие становится ложным, выполнение продолжается со строки после блока `while`.

<img src="3_1_1.png">

В следующем цикле условие — `number < 10`. Блок внутри цикла выполняется только если переменная `number` меньше 10.

```python
number = int(input("Please type in a number: "))

while number < 10:
    print(number)
    number += 1

print("Execution finished.")
```

Результат может быть таким:

<sample-output>

Please type in a number: **4**
4
5
6
7
8
9
Execution finished.

</sample-output>

В этой конструкции условие всегда проверяется до выполнения блока цикла. Может случиться, что блок не выполнится ни разу, например так:

<sample-output>

Please type in a number: **12**
Execution finished.

</sample-output>

12 не меньше 10, поэтому программа не печатает ни одного числа.

## Инициализация, условие и обновление {#initialisation-condition-and-update}

Чтобы создать цикл, часто нужно продумать три отдельные шага: инициализацию, условие и обновление переменных итерации.

_Инициализация_ — это задание начальных значений переменным, которые используются в условии цикла. Их часто называют переменными итерации (итераторами). Инициализация выполняется до первого входа в цикл. _Условие_ определяет, как долго цикл должен выполняться; оно записывается в заголовке цикла. Наконец, в каждой итерации переменные, участвующие в условии, нужно _обновлять_ (изменять), чтобы цикл постепенно приближался к завершению. Следующая картинка иллюстрирует эти шаги:

<!--- это здесь на случай, если изображение ниже понадобится обновить
```python
# Запрашиваем число у пользователя
number = int(input("Please type in a number: "))

# Повторяем, пока число меньше 10
while number < 10:

    # Печатаем число и увеличиваем его на 1
    print(number)
    number += 1

print("Execution finished.")
```
-->
<img src="3_1_2.png">

Если хотя бы один из этих трёх компонентов отсутствует, цикл, скорее всего, будет работать неправильно. Типичная ошибка — забыть шаг обновления:

```python
number = 1

while number < 10:
    print(number)

print("Execution finished.")
```

Здесь значение переменной `number` никогда не меняется. Программа застревает в бесконечном цикле и повторяет один и тот же код снова и снова, пока пользователь не остановит выполнение, например нажатием `Control` + `C`:

<sample-output>

1
1
1
1
1
(и так далее…)

</sample-output>

<in-browser-programming-exercise name="Выведите числа" anchor="Print numbers" tmcname="part03-01_print_numbers">

Напишите программу, которая с помощью цикла выводит все чётные числа от 2 до 30. Печатайте каждое число с новой строки.

Начало вывода должно выглядеть так:

<sample-output>
2
4
6
8
и так далее…
</sample-output>

</in-browser-programming-exercise>


<in-browser-programming-exercise name="Исправьте код: Обратный отсчёт" anchor="Fix the code: Countdown" tmcname="part03-02_countdown">

В программе ниже есть синтаксические ошибки:

```python
print("Are you ready?")
number = int(input("Please type in a number: "))
while number = 0:
print(number)
print("Now!")
```

Исправьте её так, чтобы она выводила следующее:

<sample-output>

Are you ready?
Please type in a number: **5**
5
4
3
2
1
Now!

</sample-output>

Это упражнение похоже на задание с обратным отсчётом из прошлого раздела, но в этот раз не используйте цикл `while True`!


</in-browser-programming-exercise>

## Формулирование условий {#writing-conditions}

В качестве условия цикла подходит любое булево выражение (или их комбинация). Например, следующая программа печатает каждое третье число, но только пока число меньше 100 и не делится на 5:

```python
number = int(input("Please type in a number: "))

while number < 100 and number % 5 != 0:
    print(number)
    number += 3
```

Два примера выполнения программы с разными вводами:

<sample-output>

Please type in a number: **28**
28
31
34
37

</sample-output>

<sample-output>

Please type in a number: **96**
96
99

</sample-output>

Если ввод равен 28, цикл заканчивается на числе 37, потому что следующее число — 40 — делится на 5. Если ввод равен 96, цикл заканчивается на 99, потому что следующее число — 102 — уже не меньше 100.

Когда вы пишете цикл, убедитесь, что его выполнение в какой-то момент обязательно завершится. Следующая программа может завершиться, а может и нет — в зависимости от ввода:

```python
number = int(input("Please type in a number: "))

while number != 10:
    print(number)
    number += 2
```

Если введено чётное число, не превосходящее 10, цикл завершится:

<sample-output>

Please type in a number: **4**
4
6
8

</sample-output>

Во всех остальных случаях цикл будет выполняться бесконечно, потому что переменная никогда не сможет стать равной 10. Например, ввод 3 или 12 приведёт к бесконечному циклу.

<in-browser-programming-exercise name="Числа" anchor="Numbers" tmcname="part03-03_numbers">

Напишите программу, которая спрашивает у пользователя число, а затем выводит все целые числа больше нуля, но меньше введённого значения.

<sample-output>

Upper limit: **5**
1
2
3
4

</sample-output>

Пожалуйста, не используйте значение `True` как условие цикла `while` в этом упражнении!

</in-browser-programming-exercise>

## Советы по отладке {#debugging-tips}

Представьте, что вы пишете программу чуть сложнее — например, следующую задачу _Powers of two_. Первые попытки могут выглядеть так:

```python
limit = int(input("Upper limit:"))
number = 1
while number == limit:
   # ...дальше код
```

Здесь программа начинается с чтения ввода, затем идёт набросок цикла и попытка сформулировать условие.

Скорее всего, код не заработает как нужно с первого раза. Возможно, его придётся протестировать десятки или даже сотни раз, прежде чем он станет работать правильно.

В таком варианте код постоянно запрашивает ввод у пользователя, и тестирование становится медленным и неудобным: каждый раз нужно заново вводить данные.

Один из способов упростить отладку — временно подставить ввод прямо в код (жёстко задать значения):

```python
# для тестирования временно подставим значение прямо в код
limit = 8 # int(input("Upper limit"))
number = 1
while number == limit:
   # ...дальше код 
```
Когда программа работает с одним фиксированным вводом, легко протестировать её и на других значениях, тоже подставив их в код. Когда кажется, что всё работает правильно, можно снова вернуть ввод от пользователя.

Этот приём работает и для многих тестов, которыми проверяются упражнения на курсе. Если тест говорит, что программа работает неправильно при вводе, например, 42, то можно временно подставить это значение в код и искать источник ошибки:

```python
# тест сообщил, что программа работает неправильно при вводе 42
limit = 42 # int(input("Upper limit"))
number = 1
while number == limit:
   # ...дальше код
```

Отладка с помощью `print` несколько раз упоминалась в [предыдущей части](/ru/part-2). По мере прохождения курса программы будут становиться всё более сложными, а вместе с этим, вероятно, увеличится и объём отладки. Частые причины ошибок связаны с условиями завершения циклов: они могут работать правильно для одних значений и ломаться для других, и не всегда очевидно почему.

Поэтому самое время добавить в свою практику отладочные сообщения с помощью `print`, если вы ещё этого не сделали. Инструкции по отладке есть в [первом](/ru/part-2/1-programming-terminology) и [четвёртом](/ru/part-2/4-simple-loops) разделах предыдущей части.

Кроме `print`, есть и другие инструменты для отладки. Один из них — [визуализатор](http://www.pythontutor.com/visualize.html#mode=edit) на сайте [Python Tutor](http://www.pythontutor.com/). Он позволяет выполнять код построчно и показывает значения переменных на каждом шаге.

Слегка «сломанный» код из примера отладки в [предыдущем разделе](/ru/part-2/4-simple-loops) визуализирован в Python Tutor на следующем изображении:

<img src="3_1_3.png">

Красная стрелка показывает, на какой строке сейчас находится выполнение программы. Инструмент отображает, что уже было выведено, и показывает значения каждой переменной на каждом шаге. Выполнение продвигается строка за строкой по нажатию _Next_.

Чтобы воспользоваться визуализатором, достаточно скопировать код и вставить его в [окно](http://www.pythontutor.com/visualize.html#mode=edit) на сайте. У инструмента есть ограничения по сравнению с версией Python, используемой на курсе. Если вы видите непонятные сообщения об ошибках, возможно, лучше попробовать другой способ отладки.

Опытные программисты редко активно пользуются визуализатором, но для новичка он может быть очень полезным. В программировании мало места удаче: важно понимать, какие значения создаёт ваш код в каждый момент выполнения. Если значения переменных не такие, как вы ожидали, скорее всего, в программе есть ошибка.

Визуализатор и отладочные сообщения `print` — отличные способы «увидеть своими глазами», что программа делает именно то, что ожидается.

<in-browser-programming-exercise name="Степени двойки" anchor="Powers of two" tmcname="part03-04_powers_of_two">

Напишите программу, которая спрашивает верхнюю границу. Затем программа печатает числа, начиная с 1, так что каждое следующее число в два раза больше предыдущего. То есть программа выводит степени двойки по порядку.

Выполнение заканчивается, когда следующее число стало бы больше заданной границы. Числа, превышающие границу, печатать не нужно.

<sample-output>

Upper limit: **8**
1
2
4
8

</sample-output>

<sample-output>

Upper limit: **20**
1
2
4
8
16

</sample-output>

<sample-output>

Upper limit: **100**
1
2
4
8
16
32
64

</sample-output>

Пожалуйста, не используйте значение `True` как условие цикла `while` в этом упражнении!

**Что такое степени двойки?** Первая степень двойки — это число 1. Следующая — 1 умножить на 2, то есть 2. Затем 2 умножить на 2 — это 4. Затем 4 умножить на 2 — это 8 и так далее. Каждая следующая степень в последовательности получается умножением предыдущей на 2.

</in-browser-programming-exercise>

<in-browser-programming-exercise name="Степени основания n" anchor="Powers of base n" tmcname="part03-05_powers_of_base_n">

Измените программу из предыдущего упражнения так, чтобы пользователь мог вводить также основание, которое будет умножаться (в предыдущей программе основание всегда было равно 2).

<sample-output>

Upper limit: **27**
Base: **3**
1
3
9
27

</sample-output>

<sample-output>

Upper limit: **1234567**
Base: **10**
1
10
100
1000
10000
100000
1000000

</sample-output>

Пожалуйста, не используйте значение `True` как условие цикла `while` в этом упражнении!

</in-browser-programming-exercise>

<in-browser-programming-exercise name="Сумма последовательных чисел, версия 1" anchor="The sum of consecutive numbers, version 1" tmcname="part03-06_consecutive_sum_v1">

Напишите программу, которая спрашивает ограничение (limit). Затем программа вычисляет сумму последовательных чисел (1 + 2 + 3 + …) до тех пор, пока сумма не станет хотя бы равной введённому ограничению. Программа должна работать так:

<sample-output>

Limit: **2**
3

</sample-output>

<sample-output>

Limit: **10**
10

</sample-output>

<sample-output>

Limit: **18**
21

</sample-output>

Если вам сложно понять, как получается нужный результат, могут помочь примеры в следующем упражнении. Можно считать, что введённое число всегда не меньше 2.

</in-browser-programming-exercise>

## Сборка строк {#building-strings}

Ещё в [первую неделю курса](/ru/part-1/2-information-from-the-user) мы узнали, что строки можно «собирать» из более коротких строк с помощью оператора `+`. Например, такой код на Python корректен:

```python
words = "pride"
words = words + ", prejudice"
words = words + " and python"

print(words)
```

<sample-output>

pride, prejudice and python

</sample-output>

Оператор `+=` позволяет записать то же самое компактнее:

```python
words = "pride"
words += ", prejudice"
words += " and python"

print(words)
```

То же относится и к f-строкам — это удобно, когда нужно включить значения переменных в итоговую строку. Например, это будет работать:

```python
course = "Introduction to Programming"
grade = 4

verdict = "You have received "
verdict += f"the grade {grade} "
verdict += f"from the course {course}"

print(verdict)
```

<sample-output>

You have received the grade 4 from the course Introduction to Programming

</sample-output>

В предыдущем упражнении вы вычисляли сумму последовательных чисел, каждый раз добавляя новое значение внутри цикла.

Точно такая же идея работает и со строками: внутри цикла можно добавлять новые фрагменты к строке. Этот приём пригодится в следующем упражнении.

<in-browser-programming-exercise name="Сумма последовательных чисел, версия 2" anchor="The sum of consecutive numbers, version 2" tmcname="part03-07_consecutive_sum_v2">

Напишите новую версию программы из предыдущего упражнения. Помимо результата она должна также печатать произведённые вычисления:

<sample-output>

Limit: **2**
The consecutive sum: 1 + 2 = 3

</sample-output>

<sample-output>

Limit: **10**
The consecutive sum: 1 + 2 + 3 + 4 = 10

</sample-output>

<sample-output>

Limit: **18**
The consecutive sum: 1 + 2 + 3 + 4 + 5 + 6 = 21

</sample-output>

Можно считать, что введённое число всегда не меньше 2.

</in-browser-programming-exercise>

<!---
Тест для повторения материала этого раздела:

<quiz id="900c0293-b14c-5736-b1a3-68d4fa01ac43"></quiz>
-->
